import*as o from"https://unpkg.com/three@0.160.0/build/three.module.js";import{OrbitControls as N}from"https://unpkg.com/three@0.160.0/examples/jsm/controls/OrbitControls.js";import{FBXLoader as q}from"https://unpkg.com/three@0.160.0/examples/jsm/loaders/FBXLoader.js";import{GUI as I}from"https://unpkg.com/lil-gui@0.18.2/dist/lil-gui.esm.min.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))M(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const h of s.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&M(h)}).observe(document,{childList:!0,subtree:!0});function f(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function M(n){if(n.ep)return;n.ep=!0;const s=f(n);fetch(n.href,s)}})();class S{constructor(d,f){this.object=d,this.prop=f}get value(){return`#${this.object[this.prop].getHexString()}`}set value(d){this.object[this.prop].set(d)}}function U(){const x=document.querySelector("#c"),d=new o.WebGLRenderer({antialias:!0,canvas:x});d.setSize(window.innerWidth,window.innerHeight,!1),d.setPixelRatio(window.devicePixelRatio);const f=75,M=window.innerWidth/window.innerHeight,n=.5,s=500,h=new o.PerspectiveCamera(f,M,n,s);h.position.set(0,2,10);const L=new N(h,d.domElement);L.enableDamping=!0;const r=new o.Scene,C=new o.AmbientLight(4210752,2);r.add(C);const g=new o.DirectionalLight(16777215,1);g.position.set(-5,5,5),r.add(g);const P=new o.PointLight(16711680,1,50);P.position.set(5,5,5),r.add(P);const w=new o.HemisphereLight(16777215,4473924,1);w.position.set(0,20,0),r.add(w);const u=new I;u.addColor(new S(C,"color"),"value").name("Ambient Color"),u.add(C,"intensity",0,5,.01),u.addColor(new S(g,"color"),"value").name("Directional Color"),u.add(g,"intensity",0,5,.01),u.addColor(new S(w,"color"),"value").name("Hemisphere Sky"),u.addColor(new S(w,"groundColor"),"value").name("Hemisphere Ground"),u.add(w,"intensity",0,5,.01);const m=new o.TextureLoader,R=m.load("public/pufferfish1.jpg"),T=m.load("public/coral.jpg"),v=m.load("public/jellyfish.jpg");v.colorSpace=o.SRGBColorSpace;const j=m.load("public/flower.jpg"),A=m.load("public/underwater.jpg");A.colorSpace=o.SRGBColorSpace,r.background=A,j.colorSpace=o.SRGBColorSpace;const y=[];for(let t=0;t<7;t++){const e=new o.Mesh(new o.BoxGeometry,new o.MeshPhongMaterial({map:v}));e.position.set(Math.random()*20-10,Math.random()*5,Math.random()*20-10),r.add(e),y.push(e)}for(let t=0;t<7;t++){const e=new o.Mesh(new o.SphereGeometry(.75,32,32),new o.MeshPhongMaterial({map:R}));e.position.set(Math.random()*20-10,Math.random()*5,Math.random()*20-10),r.add(e),y.push(e)}for(let t=0;t<5;t++){const e=new o.Mesh(new o.CylinderGeometry(.5,.5,2,32),new o.MeshPhongMaterial({map:T}));e.position.set(Math.random()*20-10,.2,Math.random()*20-10),r.add(e)}for(let t=0;t<20;t++){const e=new o.Mesh(new o.SphereGeometry(.3,16,16),new o.MeshPhongMaterial({color:11184810}));e.scale.y=.5,e.position.set(Math.random()*20-10,.2,Math.random()*20-10),r.add(e)}const E=[];for(let t=0;t<50;t++){const e=new o.Mesh(new o.SphereGeometry(.2,16,16),new o.MeshPhongMaterial({color:10079487,transparent:!0,opacity:.5}));e.position.set(Math.random()*20-10,Math.random()*8+2,Math.random()*20-10),r.add(e),E.push(e)}const O=m.load("public/seaweed.jpg");O.colorSpace=o.SRGBColorSpace;const B=[];for(let t=0;t<15;t++){const e=new o.Group;let a=6+Math.floor(Math.random()*3),c=0;for(let i=0;i<a;i++){const l=new o.Mesh(new o.ConeGeometry(.25-i*.06,1+Math.random()*.5,8),new o.MeshPhongMaterial({map:O}));l.position.y=c,l.rotation.z=(Math.random()-.5)*.2,l.rotation.x=(Math.random()-.5)*.1,e.add(l),c+=l.geometry.parameters.height}e.position.set(Math.random()*20-10,0,Math.random()*20-10),r.add(e),B.push(e)}const z=new q,G=[];function D(t,e,a=3){z.load(t,c=>{console.log("Loaded FBX:",t,c);const i=new o.Group;let l=0;if(c.traverse(function(p){p.isMesh&&(console.log("Found mesh:",p),l++,p.frustumCulled=!1,p.material.side=o.DoubleSide,i.add(p.clone()))}),l===0){console.warn("NO MESH FOUND in:",t);return}i.scale.set(e,e,e),i.position.set(Math.random()*20-10,Math.random()*5,Math.random()*20-10),r.add(i),G.push(i);for(let p=0;p<a-1;p++){const b=i.clone();b.position.set(Math.random()*60-30,Math.random()*10,Math.random()*60-30),b.rotation.y=Math.random()*Math.PI*2,r.add(b),G.push(b)}},void 0,c=>{console.error(`Error loading ${t}:`,c)})}D("/ducky.fbx",.1,8);const H=new o.Mesh(new o.BoxGeometry,new o.MeshPhongMaterial({map:j}));H.position.set(0,4,0),r.add(H);function F(t){t*=.001,y.forEach((e,a)=>{const c=1+a*.1,i=t*c;e.rotation.x=i,e.rotation.y=i}),G.forEach((e,a)=>{e.position.x+=Math.sin(t*.6+a)*.02,e.position.z+=Math.cos(t*.6+a)*.02}),E.forEach((e,a)=>{e.position.y+=.02,e.position.y>15&&(e.position.y=0)}),B.forEach((e,a)=>{e.rotation.z=Math.sin(t+a)*.4}),y.forEach((e,a)=>{e.position.x+=Math.sin(t*.5+a)*.01,e.position.z+=Math.cos(t*.5+a)*.01,e.rotation.y+=.005}),L.update(),d.render(r,h),requestAnimationFrame(F)}requestAnimationFrame(F)}U();
